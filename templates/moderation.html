{% extends "base.html" %}

{% block title %}–ú–æ–¥–µ—Ä–∞—Ü–∏—è{% endblock %}

{% block content %}
<div class="container">
  <h3 class="mb-4">üìë –ñ–∞—Ä–∏—è–ª–∞–Ω—ã–º–¥–∞—Ä–¥—ã –º–æ–¥–µ—Ä–∞—Ü–∏—è–ª–∞—É</h3>

  <!-- –§–∏–ª—å—Ç—Ä–ª–µ—Ä -->
  <form method="GET" action="/moderation" class="row g-3 mb-4">
    <div class="col-md-3">
      <input type="text" name="faculty" class="form-control form-control-sm" placeholder="–§–∞–∫—É–ª—å—Ç–µ—Ç">
    </div>
    <div class="col-md-2">
      <input type="text" name="type" class="form-control form-control-sm" placeholder="–ñ“±–º—ã—Å —Ç“Ø—Ä—ñ">
    </div>
    <div class="col-md-2">
      <select name="year" class="form-select">
        <option value="">–ñ—ã–ª—ã</option>
        <option>2024</option>
        <option>2023</option>
        <option>2022</option>
      </select>
    </div>
    <div class="col-md-2">
      <select name="language" class="form-select">
        <option value="">–ñ“±–º—ã—Å —Ç—ñ–ª—ñ</option>
        <option>“ö–∞–∑–∞“õ</option>
        <option>–û—Ä—ã—Å</option>
        <option>–ê“ì—ã–ª—à—ã–Ω</option>
      </select>
    </div>
    <div class="col-md-2">
      <select name="status" class="form-select form-select-sm">
        <option value="">–ë–∞—Ä–ª—ã“ì—ã</option>
        <option value="“ö–∞—Ä–∞—Å—Ç—ã—Ä—ã–ª—É–¥–∞">“ö–∞—Ä–∞—Å—Ç—ã—Ä—ã–ª—É–¥–∞</option>
        <option value="“ö–∞–±—ã–ª–¥–∞–Ω–¥—ã">“ö–∞–±—ã–ª–¥–∞–Ω–¥—ã</option>
        <option value="“ö–∞–π—Ç–∞—Ä—ã–ª–¥—ã">“ö–∞–π—Ç–∞—Ä—ã–ª–¥—ã</option>
      </select>
    </div>
    <div class="col-md-2">
      <button type="submit" class="btn btn-primary btn-sm w-100">–Ü–∑–¥–µ—É</button>
    </div>
  </form>

  <!-- –¢—ñ–∑—ñ–º -->
  <table class="table table-bordered table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th>–ê—Ç–∞—É—ã</th>
        <th>–ê–≤—Ç–æ—Ä(–ª–∞—Ä)</th>
        <th>–§–∞–∫—É–ª—å—Ç–µ—Ç</th>
        <th>–ñ“±–º—ã—Å —Ç“Ø—Ä—ñ</th>
        <th>–ñ—ã–ª—ã</th>
        <th>–¢—ñ–ª—ñ</th>
        <th>–§–∞–π–ª</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>”ò—Ä–µ–∫–µ—Ç</th>
      </tr>
    </thead>
    <tbody>
      {% for pub in publications %}
      <tr>
        <td>{{ pub[1] }}</td>
    <td>{{ pub[2] }}</td>
    <td>{{ pub[7] if pub[7] else '‚Äî' }}</td>
    <td>{{ pub[4] }}</td>
    <td>{{ pub[3] }}</td>
    <td>{{ pub[8] if pub[8] else '‚Äî' }}</td>  <!-- –≤–æ—Ç —Å—é–¥–∞ —è–∑—ã–∫ -->
    <td>
  {% if pub[6] %}
    <a href="/{{ pub[6] }}" target="_blank" class="btn btn-link btn-sm">–ö”©—Ä—É</a>
  {% else %}
    –ñ–æ“õ
  {% endif %}
</td>

        <td>
          <span class="badge 
            {% if pub[5] == '“ö–∞–±—ã–ª–¥–∞–Ω–¥—ã' %} bg-success
            {% elif pub[5] == '“ö–∞–π—Ç–∞—Ä—ã–ª–¥—ã' %} bg-danger
            {% else %} bg-warning text-dark
            {% endif %}
          ">{{ pub[5] }}</span>
        </td>
        <td>
          <form method="POST" action="/moderation-action/{{ pub[0] }}" class="d-flex">
            <input type="text" name="comment" class="form-control form-control-sm me-2" placeholder="–ï—Å–∫–µ—Ä—Ç–ø–µ">
            <button type="submit" name="action" value="approve" class="btn btn-success btn-sm me-1">‚úÖ</button>
            <button type="submit" name="action" value="reject" class="btn btn-danger btn-sm">‚ùå</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if not publications %}
    <p class="text-center text-muted">–ñ“±–º—ã—Å—Ç–∞—Ä —Ç–∞–±—ã–ª–º–∞–¥—ã.</p>
  {% endif %}

</div>
{% endblock %}
