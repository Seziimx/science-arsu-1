{% extends 'base.html' %}

{% block content %}
<h3>üìë –ú–µ–Ω—ñ“£ –∂–∞—Ä–∏—è–ª–∞–Ω—ã–º–¥–∞—Ä—ã–º</h3>

<form method="get" class="row g-2 mb-3">
  <div class="col">
    <select name="status" class="form-select">
      <option value="">–°—Ç–∞—Ç—É—Å –±–æ–π—ã–Ω—à–∞</option>
      <option value="“ö–∞–±—ã–ª–¥–∞–Ω–¥—ã">“ö–∞–±—ã–ª–¥–∞–Ω–¥—ã</option>
      <option value="“ö–∞–π—Ç–∞—Ä—ã–ª–¥—ã">“ö–∞–π—Ç–∞—Ä—ã–ª–¥—ã</option>
      <option value="“ö–∞—Ä–∞—Å—Ç—ã—Ä—ã–ª—É–¥–∞">“ö–∞—Ä–∞—Å—Ç—ã—Ä—ã–ª—É–¥–∞</option>
    </select>
  </div>
  <div class="col">
    <input type="text" name="year" class="form-control" placeholder="–ñ—ã–ª—ã">
  </div>
  <div class="col">
    <button class="btn btn-primary">–°“Ø–∑–≥—ñ–ª–µ—É</button>
  </div>
{% if request.args.get('status') or request.args.get('year') %}
  <div class="col">
    <a href="{{ url_for('my_publications') }}" class="btn btn-secondary">–ë–∞—Ä–ª—ã“ì—ã–Ω –∫”©—Ä—É</a>
  </div>
{% endif %}
</form>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>–ê—Ç–∞—É—ã</th>
      <th>–¢“Ø—Ä—ñ</th>
      <th>–ñ—ã–ª—ã</th>
      <th>–°—Ç–∞—Ç—É—Å</th>
      <th>Scopus/WoS</th>
      <th>–ï—Å–∫–µ—Ä—Ç—É</th>
      <th>–§–∞–π–ª</th>
      <th>–¢“Ø–∑–µ—Ç—É</th>
    </tr>
  </thead>
  <tbody>
    {% for pub in publications %}
    <tr>
      <td>{{ pub[1] }}</td>
      <td>{{ pub[3] }}</td>
      <td>{{ pub[2] }}</td>
      <td>{{ pub[4] }}</td>
      <td>{{ pub[5] or "–ñ–æ“õ" }}</td>
      <td>{{ pub[6] or "-" }}</td>
      <td>
        {% if pub[7] %}
        <a href="/{{ pub[7] }}" target="_blank">–ê—à—É</a>
        {% else %}
        –ñ–æ“õ
        {% endif %}
      </td>
      <td>
        {% if pub[4] == "“ö–∞–π—Ç–∞—Ä—ã–ª–¥—ã" %}
        <a href="/edit-publication/{{ pub[0] }}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
        {% else %}
        -
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
