{% extends "base.html" %}

{% block title %}Ğ•ÑĞµĞ¿ Ğ±ĞµÑ€Ñƒ{% endblock %}

{% block content %}

<!-- Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/stats.css') }}">

<div class="container">
  <h3 class="mb-4">ğŸ“ˆ Ğ•ÑĞµĞ¿ Ğ±ĞµÑ€Ñƒ Ğ±ĞµÑ‚Ñ–</h3>

  <div class="d-flex flex-wrap gap-2 mb-4">
    <button type="button" onclick="exportExcel()" class="btn btn-success">ğŸ“¥ Excel</button>
    <button type="button" onclick="downloadPDF()" class="btn btn-danger">ğŸ“„ Ğ‘Ğ°Ñ€Ğ»Ñ‹Ò› Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºÑ‚ĞµÑ€ PDF</button>
  </div>

  <!-- Ğ“Ñ€Ğ°Ñ„Ğ¸ĞºÑ‚ĞµÑ€ -->
  <div class="row g-3 mb-4">
    <div class="col-12 col-md-6">
      <div class="card p-3 shadow-sm">
        <h5 class="text-center mb-3">ğŸ“Š Ğ–Ñ‹Ğ» Ğ±Ğ¾Ğ¹Ñ‹Ğ½ÑˆĞ°</h5>
        <div class="chart-container">
          <canvas id="yearChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card p-3 shadow-sm">
        <h5 class="text-center mb-3">ğŸ« Ğ¤Ğ°ĞºÑƒĞ»ÑŒÑ‚ĞµÑ‚Ñ‚ĞµÑ€</h5>
        <div class="chart-container">
          <canvas id="facultyChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card p-3 shadow-sm">
        <h5 class="text-center mb-3">ğŸ“š Ğ–Ò±Ğ¼Ñ‹Ñ Ñ‚Ò¯Ñ€Ñ–</h5>
        <div class="chart-container">
          <canvas id="typeChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card p-3 shadow-sm">
        <h5 class="text-center mb-3">ğŸ“Œ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ</h5>
        <div class="chart-container">
          <canvas id="statusChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Jinja Ğ² JS -->
<script>
  const year_labels = {{ year_labels|tojson }};
  const year_counts = {{ year_counts|tojson }};
  const faculty_labels = {{ faculty_labels|tojson }};
  const faculty_counts = {{ faculty_counts|tojson }};
  const type_labels = {{ type_labels|tojson }};
  const type_counts = {{ type_counts|tojson }};
  const status_labels = {{ status_labels|tojson }};
  const status_counts = {{ status_counts|tojson }};
</script>

<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
<script src="{{ url_for('static', filename='js/export.js') }}"></script>

{% endblock %}
